<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.sist.web.mapper.BoardMapper">
  <select id="boardListData" resultType="com.sist.web.vo.BoardVO" parameterType="hashmap"
  >
  	SELECT no,subject,name,TO_CHAR(regdate,'YYYY-MM-DD') as dbday,hit,num
  	FROM (SELECT no,subject,name,regdate,hit,rownum as num 
  	FROM (SELECT no,subject,name,regdate,hit
  	FROM SpringReplyBoard ORDER BY group_id DESC, group_step ASC))
  	WHERE num BETWEEN #{start} AND #{end}
  </select>
  <select id="boardRowCount" resultType="int">
    SELECT COUNT(*) FROM SpringReplyBoard
  </select>  
  <insert id="boardInsert" parameterType="com.sist.web.vo.BoardVO">
    INSERT INTO SpringReplyBoard(no,name,subject,content,pwd,group_id)
    VALUES(srb_no_seq.nextval,#{name},#{subject},#{content},#{pwd},(SELECT NVL(MAX(group_id)+1,1) 
    FROM SpringReplyBoard))
  </insert>
  <!-- 							gi	gs	gt
  		AAAAAA					1	0	0	
  			=> BBBBBB			1	1	1
  				=> CCCCCC		1	2	2
  			=> DDDDDD			1	3	1
  		KKKKKK					2	0	0
   -->
   <!-- 상세보기 -->
   <update id="boardHitIncrement" parameterType="int">
     UPDATE SpringReplyBoard SET
     hit=hit+1
     WHERE no=#{no}
   </update>
   <select id="boardDetailData" resultType="com.sist.web.vo.BoardVO" parameterType="int"
   >
     SELECT no,name,subject,content,hit,TO_CHAR(regdate,'YYYY-MM-DD HH24:MI:SS') as dbday
     FROM SpringReplyBoard
     WHERE no=#{no}
   </select>
   <!-- 답변 -->
   <!-- 수정 : Vue 연동 -->
   <!-- 삭제 : Vue 연동 -->
 </mapper>